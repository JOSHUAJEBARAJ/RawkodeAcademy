datasource db {
  provider = "sqlite"
  url      = "file:data.db"
}

generator client {
  provider = "prisma-client-js"
  output   = ".build/client-js"
}

generator jsonSchema {
  provider = "prisma-json-schema-generator"
  output   = ".build/json-schema"
}

generator graphql {
  provider   = "graphql-schema-generator"
  createCRUD = "false"
  output     = ".build/graphql"
}

model Link {
  id           Int          @id @default(autoincrement())
  name         String
  url          String
  people       Person[]
  technologies Technology[]
  shows        Show[]
  episodes     Episode[]

  @@map(name: "links")
}

model Person {
  id            String    @id
  name          String
  email         String?   @unique
  githubHandle  String?   @unique
  twitterHandle String?   @unique
  links         Link[]
  shows         Show[]
  episodes      Episode[]

  @@map(name: "people")
}

model Show {
  id       String    @id
  name     String
  host     Person    @relation(fields: [personId], references: [id])
  personId String
  links    Link[]
  tags     Tag[]
  episodes Episode[]

  @@map(name: "shows")
}

model Technology {
  name       String    @id
  links      Link[]
  openSource Boolean   @default(false)
  episodes   Episode[]
  tags       Tag[]

  @@map(name: "technologies")
}

model Tag {
  name         String       @id
  episodes     Episode[]
  technologies Technology[]
  shows        Show[]

  @@map(name: "tags")
}

model Chapter {
  time      String  @unique
  episodeId String  @unique
  title     String
  episode   Episode @relation(fields: [episodeId], references: [id])

  @@map(name: "chapters")
}

model Episode {
  id              String       @id
  title           String
  showId          String
  liveStream      Boolean      @default(false)
  publishedAt     DateTime
  sponsored       Boolean
  show            Show         @relation(fields: [showId], references: [id])
  chapters        Chapter[]
  guests          Person[]
  technologies    Technology[]
  tags            Tag[]
  links           Link[]
  youTubeCategory Int
  youTubeId       String
  description     String?

  @@map(name: "episodes")
}
